[{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 tessireport authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sky Syzygy. Author, maintainer.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Syzygy S (2024). tessireport: Data hygiene tools Tessitura. R package version 0.0.0.9000, https://github.com/skysyzygy/tessireport.","code":"@Manual{,   title = {tessireport: Data hygiene tools for Tessitura},   author = {Sky Syzygy},   year = {2024},   note = {R package version 0.0.0.9000},   url = {https://github.com/skysyzygy/tessireport}, }"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/index.html","id":null,"dir":"","previous_headings":"","what":"Data hygiene tools for Tessitura","title":"Data hygiene tools for Tessitura","text":"tessireport set scripts data hygiene Tessitura, using data queried cached tessilake processed tessistream.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Data hygiene tools for Tessitura","text":"can install latest version GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"skysyzygy/tessireport\")"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Data hygiene tools for Tessitura","text":"run simple SQL report…","code":"library(tessireport)  run(sql_report, query = \"select * from my_table\",     subject = \"This is my table\",     emails = \"me@me.com\")"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/arrow_to_mlr3.html","id":null,"dir":"Reference","previous_headings":"","what":"arrow_to_mlr3 — arrow_to_mlr3","title":"arrow_to_mlr3 — arrow_to_mlr3","text":"Converts arrow Table/Dataset mlr3 Backend","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/arrow_to_mlr3.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"arrow_to_mlr3 — arrow_to_mlr3","text":"","code":"arrow_to_mlr3(dataset, primary_key = \"I\")"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/arrow_to_mlr3.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"arrow_to_mlr3 — arrow_to_mlr3","text":"dataset arrow::Table arrow::Dataset primary_key character name column use primary key","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/arrow_to_mlr3.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"arrow_to_mlr3 — arrow_to_mlr3","text":"mlr3db::DataBackendDplyr","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":null,"dir":"Reference","previous_headings":"","what":"contributions_model — contributions_model","title":"contributions_model — contributions_model","text":"mlr3 model predicting customer's first contribution","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"contributions_model — contributions_model","text":"","code":"contributions_model  contributions_dataset(since = Sys.Date() - 365 * 5, until = Sys.Date(), ...)  # S3 method for class 'contributions_model' read(   model,   rebuild_dataset = NULL,   since = Sys.Date() - 365 * 5,   until = Sys.Date(),   predict_since = Sys.Date() - 30,   ... )  # S3 method for class 'contributions_model' train(model, ...)  # S3 method for class 'contributions_model' predict(model, ...)"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"contributions_model — contributions_model","text":"object class contributions_model (inherits mlr_report, report, list) length 0.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"contributions_model — contributions_model","text":"since Date/POSIXct data date loaded possibly used training Date/POSIXct data date used training predictions, defaults beginning today ... used model contributions_model object rebuild_dataset boolean rebuild dataset calling contributions_dataset(since=since,=) (TRUE), just read existing one (FALSE), append new rows calling contributions_dataset(since=max_existing_date,=) (NULL, default) predict_since Date/POSIXct data /date used make predictions training","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":"methods-by-generic-","dir":"Reference","previous_headings":"","what":"Methods (by generic)","title":"contributions_model — contributions_model","text":"read(contributions_model): Read contribution data prepare mlr3 training task prediction/validation task train(contributions_model): Tune train stacked log-reg/ranger model data predict(contributions_model): Predict using trained model","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"contributions_model — contributions_model","text":"contributions_dataset(): Build contributions dataset overall stream. events first contribution per household > $50 data event censored contribution indicators rolled back timestamps normalized start customer activity data since since loaded Data written primary cache partitioned year synced across storages","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"contributions_model — contributions_model","text":"Data loaded -memory, [inaudible] mlr3 work well factors encoded dictionaries arrow tables.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":"preprocessing-","dir":"Reference","previous_headings":"","what":"Preprocessing:","title":"contributions_model — contributions_model","text":"ignore 1-day email \"send\" features leak data remove constant features balance classes ratio 1:10 T:F Yeo-Johnson tuned boundaries impute missing values --range add missing data indicator features feature importance filter (log-reg submodel )","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model.html","id":"model-","dir":"Reference","previous_headings":"","what":"Model:","title":"contributions_model — contributions_model","text":"stacked log-reg + ranger > log-reg model tuned using hyperband method AUC (sensitivity/specificity)","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model_report.html","id":null,"dir":"Reference","previous_headings":"","what":"contributions_model_report — contributions_model_report","title":"contributions_model_report — contributions_model_report","text":"emailed report predictions contributions_model","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"contributions_model_report — contributions_model_report","text":"","code":"contributions_model_report  # S3 method for class 'contributions_model_report' read(report, ...)  # S3 method for class 'contributions_model_report' process(report, ...)  # S3 method for class 'contributions_model_report' output(   report,   subject = paste(\"Contributions model\", Sys.Date()),   body = paste(\"Sent by\", Sys.info()[\"nodename\"]),   emails = config::get(\"tessiflow.email\"),   ... )"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model_report.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"contributions_model_report — contributions_model_report","text":"object class contributions_model_report (inherits report, list) length 0.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"contributions_model_report — contributions_model_report","text":"report contributions_model_report object ... used subject Subject email. body Body email text. parameter body refers existing file location, text file parsed body email. emails email addresses (first sender)","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/contributions_model_report.html","id":"methods-by-generic-","dir":"Reference","previous_headings":"","what":"Methods (by generic)","title":"contributions_model_report — contributions_model_report","text":"read(contributions_model_report): Read data contributions_model_report process(contributions_model_report): Process data contributions_model_report output(contributions_model_report): Send spreadsheet contributions_model_report","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/dot-__TaskSurv__initialize.html","id":null,"dir":"Reference","previous_headings":"","what":".__TaskSurv__initialize — .__TaskSurv__initialize","title":".__TaskSurv__initialize — .__TaskSurv__initialize","text":"Shim .__TaskSurv__initialize work duckdb tables","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/dot-__TaskSurv__initialize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":".__TaskSurv__initialize — .__TaskSurv__initialize","text":"","code":".__TaskSurv__initialize(   id,   backend,   time = \"time\",   event = \"event\",   time2,   type = c(\"right\", \"left\", \"interval\", \"counting\", \"interval2\", \"mstate\"),   label = NA_character_ )"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/dot-__TaskSurv__initialize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":".__TaskSurv__initialize — .__TaskSurv__initialize","text":"id (character(1)) Identifier new instance. backend (DataBackend) Either DataBackend, object convertible DataBackend as_data_backend(). E.g., data.frame() converted DataBackendDataTable.#' @template param_time time (character(1)) Name column event time data right censored, otherwise starting time interval censored. event (character(1)) Name column giving event indicator. data right censored \"0\"/FALSE means alive (event), \"1\"/TRUE means dead (event). type \"interval\" \"0\" means right censored, \"1\" means dead (event), \"2\" means left censored, \"3\" means interval censored. type \"interval2\" event ignored. time2 (character(1)) Name column ending time interval interval censored counting process data, otherwise ignored. type (character(1)) Name column giving type censoring. Default 'right' censoring. label (character(1)) Label new instance.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/duplicates_report.html","id":null,"dir":"Reference","previous_headings":"","what":"duplicates_report — duplicates_report","title":"duplicates_report — duplicates_report","text":"Sends email containing spreadsheet duplicates review","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/duplicates_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"duplicates_report — duplicates_report","text":"","code":"# S3 method for class 'duplicates_report' read(duplicates_report, ...)  # S3 method for class 'duplicates_report' output(duplicates_report, routing = NULL, ...)"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/duplicates_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"duplicates_report — duplicates_report","text":"duplicates_report duplicates_report object ... Arguments passed send_xlsx body Body email text. parameter body refers existing file location, text file parsed body email. routing named list, names email addresses values vectors customer numbers. duplicate pair contains matching customer number emailed named email address.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/duplicates_report.html","id":"methods-by-generic-","dir":"Reference","previous_headings":"","what":"Methods (by generic)","title":"duplicates_report — duplicates_report","text":"read(duplicates_report): read duplicates data output tessistream::duplicates_stream output(duplicates_report): segments duplicates data based map provided routing emails excel spreadsheets using send_xlsx","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/make_unsubscribe_report_fixtures.html","id":null,"dir":"Reference","previous_headings":"","what":"make_unsubscribe_report_fixtures — make_unsubscribe_report_fixtures","title":"make_unsubscribe_report_fixtures — make_unsubscribe_report_fixtures","text":"Make fixtures unsubscribe_report testing","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/make_unsubscribe_report_fixtures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"make_unsubscribe_report_fixtures — make_unsubscribe_report_fixtures","text":"","code":"make_unsubscribe_report_fixtures()"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/mlr_report.html","id":null,"dir":"Reference","previous_headings":"","what":"mlr_report — mlr_report","title":"mlr_report — mlr_report","text":"Base class training/running machine learning model","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/mlr_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"mlr_report — mlr_report","text":"","code":"mlr_report  # S3 method for class 'mlr_report' read(mlr_report, ...)  # S3 method for class 'mlr_report' process(mlr_report, train = TRUE, predict = TRUE, ...)  train(...)  predict(...)  # S3 method for class 'mlr_report' output(...)  # S3 method for class 'mlr_report' write(mlr_report, subdir = \"model\", sync = TRUE, ...)"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/mlr_report.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"mlr_report — mlr_report","text":"object class mlr_report (inherits report, list) length 0.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/mlr_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"mlr_report — mlr_report","text":"mlr_report report object ... used train boolean whether run training predict boolean whether run predictions subdir character name subdirectory store data , defaults \"model\" sync boolean whether sync data across storages","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/mlr_report.html","id":"methods-by-generic-","dir":"Reference","previous_headings":"","what":"Methods (by generic)","title":"mlr_report — mlr_report","text":"read(mlr_report): load dataset mlr_report$task charge labeling column roles (.e. feature, target, group, weight) process(mlr_report): training /run model. Subclasses define train.mlr_model predict.mlr_model function, load mlr_report$task store results mlr_report$model mlr_report$predictions output(mlr_report): Analyze input set sensitivity training using standard heuristics. TBD write(mlr_report): Save trained model model output future use. Writes model tessilake::cache_primary_path subdirectory subdir syncs across storages.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/mlr_report.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"mlr_report — mlr_report","text":"train(): Train model predict(): Predict model","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/p2_orphans_report.html","id":null,"dir":"Reference","previous_headings":"","what":"p2_orphans_report — p2_orphans_report","title":"p2_orphans_report — p2_orphans_report","text":"Sends email containing plot recent orphans spreadsheet orphans.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/p2_orphans_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"p2_orphans_report — p2_orphans_report","text":"","code":"# S3 method for class 'p2_orphans_report' run(p2_orphans_report, freshness = 0, ...)"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/p2_orphans_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"p2_orphans_report — p2_orphans_report","text":"p2_orphans_report p2_orphans_report object freshness returned data least fresh ... used","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/p2_segments_and_tags.html","id":null,"dir":"Reference","previous_headings":"","what":"p2_segments_and_tags — p2_segments_and_tags","title":"p2_segments_and_tags — p2_segments_and_tags","text":"Report Prospect2 segments tags review","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/p2_segments_and_tags.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"p2_segments_and_tags — p2_segments_and_tags","text":"","code":"p2_segments_and_tags  # S3 method for class 'p2_segments_and_tags' read(data, ...)  # S3 method for class 'p2_segments_and_tags' process(   data,   segment_regex = \"^Segment of\",   tag_regex = \"(?!.*RSVP|.*\\\\(Keep\\\\))\\\\d{6,}\",   ... )  # S3 method for class 'p2_segments_and_tags' output(data, emails = config::get(\"tessiflow.email\"), body = NULL, ...)"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/p2_segments_and_tags.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"p2_segments_and_tags — p2_segments_and_tags","text":"object class p2_segments_and_tags (inherits report, list) length 0.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/p2_segments_and_tags.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"p2_segments_and_tags — p2_segments_and_tags","text":"data report object ... additional parameters passed send_email segment_regex Perl-compatible regular expression filtering segment names tag_regex Perl-compatible regular expression filtering tag names emails email addresses (first sender) body Body email text. parameter body refers existing file location, text file parsed body email.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/p2_segments_and_tags.html","id":"methods-by-generic-","dir":"Reference","previous_headings":"","what":"Methods (by generic)","title":"p2_segments_and_tags — p2_segments_and_tags","text":"read(p2_segments_and_tags): load Prospect2 segments tags process(p2_segments_and_tags): filter Prospect2 segments tags output(p2_segments_and_tags): send email spreadsheets segments tags","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/report.html","id":null,"dir":"Reference","previous_headings":"","what":"report — report","title":"report — report","text":"Base S3 class report.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"report — report","text":"","code":"report(x = list(), class = character())  is_report(x)  read(...)  # S3 method for class 'report' read(x, ...)  process(...)  # S3 method for class 'report' process(x, ...)  # S3 method for class 'report' print(x, ...)  output(...)  # S3 method for class 'report' output(x, ...)  write(...)  # S3 method for class 'report' write(x, ...)  run(...)  # S3 method for class 'report' run(x, ...)"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"report — report","text":"x list class optional additional subclass ... additional parameters subclassed methods","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/report.html","id":"methods-by-generic-","dir":"Reference","previous_headings":"","what":"Methods (by generic)","title":"report — report","text":"read(report): thing print warning, intended overloaded subclass process(report): thing print warning, intended overloaded subclass print(report): prints names contents report object output(report): thing print warning, intended overloaded subclass write(report): thing print warning, intended overloaded subclass run(report): run methods order: read -> process -> output -> write","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/report.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"report — report","text":"is_report(): tests x report object read(): generic function dispatch data reading process(): generic function dispatch data processing output(): generic fucntion dispatch data output write(): generic function dispatch data saving run(): generic function dispatch report running","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_email.html","id":null,"dir":"Reference","previous_headings":"","what":"send_email — send_email","title":"send_email — send_email","text":"send_email","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_email.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"send_email — send_email","text":"","code":"send_email(   subject,   body,   emails = config::get(\"tessiflow.email\"),   smtp = config::get(\"tessiflow.smtp\"),   ... )"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_email.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"send_email — send_email","text":"subject Subject email. body Body email text. parameter body refers existing file location, text file parsed body email. emails email addresses (first sender) smtp list configuration parameters establish authorize connection SMTP server. See details various parameters. ... Arguments passed mailR::send.mail html boolean indicating whether body email parsed HTML. attach.files character vector paths file system linking files *valid* URLs attached email (see details info attaching URLs)","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_unsubscribe_report_table.html","id":null,"dir":"Reference","previous_headings":"","what":"send_unsubscribe_report_table — send_unsubscribe_report_table","title":"send_unsubscribe_report_table — send_unsubscribe_report_table","text":"Simple wrapper send_xlsx","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_unsubscribe_report_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"send_unsubscribe_report_table — send_unsubscribe_report_table","text":"","code":"send_unsubscribe_report_table(table, email)"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_unsubscribe_report_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"send_unsubscribe_report_table — send_unsubscribe_report_table","text":"table data.table send email character email address send email ","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_xlsx.html","id":null,"dir":"Reference","previous_headings":"","what":"send_xlsx — send_xlsx","title":"send_xlsx — send_xlsx","text":"Simple wrapper send_email write_xlsx","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_xlsx.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"send_xlsx — send_xlsx","text":"","code":"send_xlsx(   table,   subject = paste(format(substitute(table)), Sys.Date()),   body = paste(\"Sent by\", Sys.info()[\"nodename\"]),   emails = config::get(\"tessiflow.email\"),   basename = format(substitute(table)),   ... )"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/send_xlsx.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"send_xlsx — send_xlsx","text":"table data.table send subject Subject email. body Body email text. parameter body refers existing file location, text file parsed body email. emails email addresses (first sender) basename name file use email. Defaults name table. timestamp extension appended passed mailR::send.mail file.names ... Arguments passed mailR::send.mail, write_xlsx html boolean indicating whether body email parsed HTML. inline boolean indicating whether images HTML file embedded inline. group character name column used grouping/banding data. Band color change column value changes. currency character vector column used grouping/banding data. Band color change column value changes.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/sql_report.html","id":null,"dir":"Reference","previous_headings":"","what":"sql_report — sql_report","title":"sql_report — sql_report","text":"Report wraps functionality tessilake::read_sql send_xlsx","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/sql_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"sql_report — sql_report","text":"","code":"# S3 method for class 'sql_report' run(sql_report, ...)  # S3 method for class 'sql_report' read(sql_report, query, ...)  # S3 method for class 'sql_report' output(sql_report, query, ...)"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/sql_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"sql_report — sql_report","text":"sql_report sql_report object ... Arguments passed tessilake::read_sql, send_xlsx, write_xlsx, mailR::send.mail primary_keys character vector, primary keys table. read_sql_table attempt identify primary keys using SQL metadata. freshness returned data least fresh basename name file use email. Defaults name table. timestamp extension appended passed mailR::send.mail file.names emails email addresses (first sender) subject Subject email. body Body email text. parameter body refers existing file location, text file parsed body email. group character name column used grouping/banding data. Band color change column value changes. currency character vector column used grouping/banding data. Band color change column value changes. html boolean indicating whether body email parsed HTML. inline boolean indicating whether images HTML file embedded inline. query character sql query generate report","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/sql_report.html","id":"methods-by-generic-","dir":"Reference","previous_headings":"","what":"Methods (by generic)","title":"sql_report — sql_report","text":"read(sql_report): reads sql_report data output(sql_report): sends sql_report data","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/sql_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"sql_report — sql_report","text":"","code":"if (FALSE) { # \\dontrun{  run(sql_report,       query = \"select * from my_table\",       subject = \"Email subject\",       body = \"Email body\",       emails = \"me@me.com\"  ) } # }"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/stream_normalize_timestamps.html","id":null,"dir":"Reference","previous_headings":"","what":"stream_normalize_timestamps — stream_normalize_timestamps","title":"stream_normalize_timestamps — stream_normalize_timestamps","text":"Replaces date-times columns integer offsets first timestamp per group identified .","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/stream_normalize_timestamps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"stream_normalize_timestamps — stream_normalize_timestamps","text":"","code":"stream_normalize_timestamps(   dataset,   columns = grep(\"timestamp\", colnames(dataset), value = T, ignore.case = T),   by = \"group_customer_no\" )"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/stream_normalize_timestamps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"stream_normalize_timestamps — stream_normalize_timestamps","text":"dataset data.table data normalize columns character vector columns normalize; defaults columns name containing word timestamp character column name group table ","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/stream_normalize_timestamps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"stream_normalize_timestamps — stream_normalize_timestamps","text":"normalized data.table","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/stream_rollback_event.html","id":null,"dir":"Reference","previous_headings":"","what":"stream_rollback_event — stream_rollback_event","title":"stream_rollback_event — stream_rollback_event","text":"Rolls back data columns rows flagged event prevent data leaks training.","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/stream_rollback_event.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"stream_rollback_event — stream_rollback_event","text":"","code":"stream_rollback_event(   dataset,   event = \"event\",   columns = NULL,   by = \"group_customer_no\" )"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/stream_rollback_event.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"stream_rollback_event — stream_rollback_event","text":"dataset data.table data roll back event character column name containing logical feature indicates events rollback columns character vector columns roll back character column name group table ","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/stream_rollback_event.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"stream_rollback_event — stream_rollback_event","text":"rolled back data.table","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/tessireport-package.html","id":null,"dir":"Reference","previous_headings":"","what":"tessireport: Data hygiene tools for Tessitura — tessireport-package","title":"tessireport: Data hygiene tools for Tessitura — tessireport-package","text":"tessireport set scripts data hygiene Tessitura, using data queried cached tessilake processed tessistream.","code":""},{"path":[]},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/tessireport-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"tessireport: Data hygiene tools for Tessitura — tessireport-package","text":"Maintainer: Sky Syzygy sky@skysyzygy.xyz (ORCID)","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/unsubscribe_report.html","id":null,"dir":"Reference","previous_headings":"","what":"unsubscribe_report — unsubscribe_report","title":"unsubscribe_report — unsubscribe_report","text":"Reports unsubscribes bad addresses group customers","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/unsubscribe_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"unsubscribe_report — unsubscribe_report","text":"","code":"# S3 method for class 'unsubscribe_report' run(unsubscribe_report, ...)  # S3 method for class 'unsubscribe_report' read(unsubscribe_report, customers, ...)  # S3 method for class 'unsubscribe_report' process(unsubscribe_report, ...)  # S3 method for class 'unsubscribe_report' output(   unsubscribe_report,   since = Sys.Date() - 30,   until = Sys.Date() + 30,   routing_rules = list(TRUE ~ list(config::get(\"tessiflow.email\"))),   ... )"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/unsubscribe_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"unsubscribe_report — unsubscribe_report","text":"unsubscribe_report unsubscribe_report object ... used customers integer vector customer numbers load since date, start date filtering returned data date, end date filtering returned data routing_rules list formulas used routing, dplyr::case_when. Can refer columns returned process.unsubscribe_report. See Note ","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/unsubscribe_report.html","id":"methods-by-generic-","dir":"Reference","previous_headings":"","what":"Methods (by generic)","title":"unsubscribe_report — unsubscribe_report","text":"read(unsubscribe_report): reads unsubscribe_report data Loads data p2: unsubscribes hard bounces list (uses p2_stream_enriched tessistream) tessi: emails, addresses, logins, memberships, constituencies, MGOs (attributes) process(unsubscribe_report): process unsubscribe_report data Checks emails unsubscribed, bounced, exist Checks mailing addresses NCOA flag exist Checks customer primary login match primary email Checks customers inactive Adds identifying info: MGO, constituencies, membership expiration date level output(unsubscribe_report): send unsubscribe_report emails MGOs Data filtered events since returned events members expiration dates since returned","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/unsubscribe_report.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"unsubscribe_report — unsubscribe_report","text":"example, value routing_rules:   Routes based following rules: GOV -> send Government Affairs (eleszynski) CP# -> send Strategic Partnerships (lmcgee) ??+ -> send Patron Program (apratama jhindle) -> send Dev Ops (kburke esearles)","code":"list(grepl(\"GOV\", constituencies) ~ list(\"eleszynski@bam.org\"),      grepl(\"CP\\\\d\", constituencies) ~ list(\"lmcgee@bam.org\"),      grepl(\"\\\\+\",constituencies) ~ list(c(\"apratama@bam.org\",\"jhindle@bam.org\")),      TRUE ~ list(c(\"kburke@bam.org\",\"esearles@bam.org\")))"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/unsubscribe_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"unsubscribe_report — unsubscribe_report","text":"","code":"if (FALSE) { # \\dontrun{ run(unsubscribe_report,     customers = c(1,2,3),     routing_rules = list(grepl(\"GOV\", constituencies) ~ list(\"eleszynski@bam.org\"),                          grepl(\"CP\\\\d\", constituencies) ~ list(\"lmcgee@bam.org\"),                          grepl(\"\\\\+\",constituencies) ~ list(c(\"apratama@bam.org\",\"jhindle@bam.org\")),                          TRUE ~ list(c(\"kburke@bam.org\",\"esearles@bam.org\")))) } # }"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/write_xlsx.html","id":null,"dir":"Reference","previous_headings":"","what":"write_xlsx — write_xlsx","title":"write_xlsx — write_xlsx","text":"Convenience wrapper around openxlsx::write.xlsx handle common formatting tasks: Column headers title-cased bolded Column widths calculated based string representations data Date columns formatted DATE instead LONGDATE optional additions: Band columns group Specify currency columns","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/write_xlsx.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"write_xlsx — write_xlsx","text":"","code":"write_xlsx(   data,   filename = tempfile(\"write_xlsx\", fileext = \".xlsx\"),   group = NULL,   currency = NULL,   overwrite = FALSE,   ... )"},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/write_xlsx.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"write_xlsx — write_xlsx","text":"data data write spreadsheet filename filename write group character name column used grouping/banding data. Band color change column value changes. currency character vector column used grouping/banding data. Band color change column value changes. overwrite TRUE, overwrite existing file. ... used","code":""},{"path":"https://bamorg-my.sharepoint.com/personal/ssyzygy_bam_org/Documents/documentation/tessireport/reference/write_xlsx.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"write_xlsx — write_xlsx","text":"filename written xlsx","code":""}]
